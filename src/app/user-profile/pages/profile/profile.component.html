<div class="profile-container bg-gray-50 dark:bg-gray-900 min-h-screen p-6">
  <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-8">Tu Perfil</h1>

  <!-- Información Personal -->
  <section class="user-info bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8" *ngIf="userData">
    <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Información Personal</h2>
    <br>
    <div class="info-item grid grid-cols-2 gap-4 mb-3">
      <label class="text-gray-600 dark:text-gray-400 font-medium">Nombre:</label>
      <span class="text-gray-800 dark:text-gray-100">{{ userData.nombre || 'No especificado' }}</span>
    </div>
    <div class="info-item grid grid-cols-2 gap-4 mb-3">
      <label class="text-gray-600 dark:text-gray-400 font-medium">Email:</label>
      <span class="text-gray-800 dark:text-gray-100">{{ userData.email || 'No especificado' }}</span>
    </div>
    <div class="info-item grid grid-cols-2 gap-4 mb-3">
      <label class="text-gray-600 dark:text-gray-400 font-medium">Sexo:</label>
      <span class="text-gray-800 dark:text-gray-100">{{ getDisplayValue('sexo', userData?.sexo) }}</span>
    </div>
    <div class="info-item grid grid-cols-2 gap-4 mb-3">
      <label class="text-gray-600 dark:text-gray-400 font-medium">Edad:</label>
      <span class="text-gray-800 dark:text-gray-100">{{ userData.edad ? userData.edad + ' años' : 'No especificado' }}</span>
    </div>
    <div class="info-item grid grid-cols-2 gap-4 mb-3">
      <label class="text-gray-600 dark:text-gray-400 font-medium">Altura:</label>
      <span class="text-gray-800 dark:text-gray-100">{{ userData.altura ? userData.altura + ' cm' : 'No especificado' }}</span>
    </div>
    <div class="info-item grid grid-cols-2 gap-4 mb-6">
      <label class="text-gray-600 dark:text-gray-400 font-medium">Peso:</label>
      <span class="text-gray-800 dark:text-gray-100">{{ userData.peso ? userData.peso + ' kg' : 'No especificado' }}</span>
    </div>
    <button
      class="edit-button bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"
      (click)="openEditProfileModal()">
      Editar Perfil
    </button>
  </section>

  <section class="user-info bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8" *ngIf="!userData">
    <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Información Personal</h2>
    <p class="text-gray-600 dark:text-gray-400 mt-2">Cargando información del perfil...</p>
  </section>

  <!-- Meta Personal -->
  <section class="detailed-objectives-info bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
    <h2 class="text-xl font-semibold text-gray-700 dark:text-gray-200">Meta Personal</h2>
    <br>

    <div class="objective-detail-card grid grid-cols-12 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
      <div class="objective-icon col-span-2 flex items-center justify-center">
        <img class="w-12 h-12" src="https://i.postimg.cc/hvXTCKqK/image.png" alt="Icono Perder Grasa" *ngIf="userObjectives?.objetivoPrincipal === 'perder-grasa'">
        <img class="w-12 h-12" src="https://i.postimg.cc/FsKB4ShK/image.png" alt="Icono Ganar Músculo" *ngIf="userObjectives?.objetivoPrincipal === 'ganar-musculo'">
        <svg class="w-12 h-12 text-gray-600 dark:text-gray-300" viewBox="0 0 24 24" fill="currentColor" *ngIf="userObjectives?.objetivoPrincipal === 'mantener-peso'">
          <path fill-rule="evenodd" d="M3 12a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
        </svg>
      </div>
      <div class="objective-text col-span-10">
        <h3 class="font-medium text-gray-700 dark:text-gray-300">Objetivo Principal</h3>
        <p class="text-gray-600 dark:text-gray-400">{{ getDisplayValue('objetivoPrincipal', userObjectives?.objetivoPrincipal) }}</p>
      </div>
    </div>

    <div class="objective-detail-card grid grid-cols-12 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
      <div class="objective-icon col-span-2 flex items-center justify-center">
        <img class="w-12 h-12" src="https://i.postimg.cc/gkY9HpkC/image.png" alt="Icono Plan Nutricional" *ngIf="userObjectives?.metodoPreferido === 'plan-nutricional'">
        <img class="w-12 h-12" src="https://i.postimg.cc/HnqyHnNL/image.png" alt="Icono Contar Calorías" *ngIf="userObjectives?.metodoPreferido === 'contar-calorias'">
      </div>
      <div class="objective-text col-span-10">
        <h3 class="font-medium text-gray-700 dark:text-gray-300">Método Preferido</h3>
        <p class="text-gray-600 dark:text-gray-400">{{ getDisplayValue('metodoPreferido', userObjectives?.metodoPreferido) }}</p>
      </div>
    </div>

    <div class="objective-detail-card grid grid-cols-12 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
      <div class="objective-icon col-span-2 flex items-center justify-center">
        <img class="w-12 h-12" src="https://i.postimg.cc/6qcSTMg7/image.png" alt="Icono Sedentario" *ngIf="userObjectives?.nivelActividad === 'sedentario'">
        <img class="w-12 h-12" src="https://i.postimg.cc/C5cPwznk/image.png" alt="Icono Ligeramente Activo" *ngIf="userObjectives?.nivelActividad === 'ligeramente-activo'">
        <img class="w-12 h-12" src="https://i.postimg.cc/gjjyq4rL/image.png" alt="Icono Moderadamente Activo" *ngIf="userObjectives?.nivelActividad === 'moderadamente-activo'">
        <img class="w-12 h-12" src="https://i.postimg.cc/9MMwv02v/image.png" alt="Icono Muy Activo" *ngIf="userObjectives?.nivelActividad === 'muy-activo'">
        <img class="w-12 h-12" src="https://i.postimg.cc/Kjhk4NBy/image.png" alt="Icono Atleta Profesional" *ngIf="userObjectives?.nivelActividad === 'atleta-profesional'">
      </div>
      <div class="objective-text col-span-10">
        <h3 class="font-medium text-gray-700 dark:text-gray-300">Nivel de Actividad Física</h3>
        <p class="text-gray-600 dark:text-gray-400">{{ getDisplayValue('nivelActividad', userObjectives?.nivelActividad) }}</p>
      </div>
    </div>

    <div class="objective-detail-card grid grid-cols-12 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
      <div class="objective-icon col-span-2 flex items-center justify-center">
        <img class="w-12 h-12" src="https://i.postimg.cc/k58tCzRy/image.png" alt="Icono Recomendada" *ngIf="userObjectives?.dietaPreferida === 'recomendada'">
        <img class="w-12 h-12" src="https://i.postimg.cc/1zPygjYB/image.png" alt="Icono Alta en Proteínas" *ngIf="userObjectives?.dietaPreferida === 'alta-proteinas'">
        <img class="w-12 h-12" src="https://i.postimg.cc/Fs5F5zgw/image.png" alt="Icono Baja en Carbohidratos" *ngIf="userObjectives?.dietaPreferida === 'baja-carbohidratos'">
        <img class="w-12 h-12" src="https://i.postimg.cc/ZY3ZcZtH/image.png" alt="Icono Keto" *ngIf="userObjectives?.dietaPreferida === 'keto'">
        <img class="w-12 h-12" src="https://i.postimg.cc/bwrBmHSP/image.png" alt="Icono Baja en Grasas" *ngIf="userObjectives?.dietaPreferida === 'baja-grasas'">
      </div>
      <div class="objective-text col-span-10">
        <h3 class="font-medium text-gray-700 dark:text-gray-300">Dieta Preferida</h3>
        <p class="text-gray-600 dark:text-gray-400">{{ getDisplayValue('dietaPreferida', userObjectives?.dietaPreferida) }}</p>
      </div>
    </div>

    <button
      class="edit-button bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"
      (click)="openEditObjectivesModal()">
      Editar Meta
    </button>
  </section>

  <!-- Modal Editar Objetivos -->
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" *ngIf="isEditingObjectives">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">Editar Meta</h3>
      <form (ngSubmit)="saveObjectiveChanges()" #editObjectivesForm="ngForm">
        <div class="form-group mb-4">
          <label for="objetivoPrincipal" class="block text-gray-700 dark:text-gray-300 mb-2">Objetivo Principal:</label>
          <select
            id="objetivoPrincipal"
            name="objetivoPrincipal"
            [(ngModel)]="editedObjectives.objetivoPrincipal"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
            <option value="" disabled selected>Seleccionar</option>
            <option value="perder-grasa">Perder Grasa</option>
            <option value="ganar-musculo">Ganar Músculo</option>
            <option value="mantener-peso">Mantener Peso</option>
          </select>
        </div>

        <div class="form-group mb-4">
          <label for="metodoPreferido" class="block text-gray-700 dark:text-gray-300 mb-2">Método Preferido:</label>
          <select
            id="metodoPreferido"
            name="metodoPreferido"
            [(ngModel)]="editedObjectives.metodoPreferido"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
            <option value="" disabled selected>Seleccionar</option>
            <option value="plan-nutricional">Necesito un plan nutricional</option>
            <option value="contar-calorias">Necesito contar mis calorías</option>
          </select>
        </div>

        <div class="form-group mb-4">
          <label for="nivelActividad" class="block text-gray-700 dark:text-gray-300 mb-2">Nivel de Actividad Física:</label>
          <select
            id="nivelActividad"
            name="nivelActividad"
            [(ngModel)]="editedObjectives.nivelActividad"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
            <option value="" disabled selected>Seleccionar</option>
            <option value="sedentario">Sedentario</option>
            <option value="ligeramente-activo">Ligeramente Activo</option>
            <option value="moderadamente-activo">Moderadamente Activo</option>
            <option value="muy-activo">Muy Activo</option>
            <option value="atleta-profesional">Atleta Profesional</option>
          </select>
        </div>

        <div class="form-group mb-6">
          <label for="dietaPreferida" class="block text-gray-700 dark:text-gray-300 mb-2">Dieta Preferida:</label>
          <select
            id="dietaPreferida"
            name="dietaPreferida"
            [(ngModel)]="editedObjectives.dietaPreferida"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
            <option value="" disabled selected>Seleccionar</option>
            <option value="recomendada">Recomendada</option>
            <option value="alta-proteinas">Alta en Proteínas</option>
            <option value="baja-carbohidratos">Baja en Carbohidratos</option>
            <option value="keto">Keto</option>
            <option value="baja-grasas">Baja en Grasas</option>
          </select>
        </div>

        <div class="modal-buttons flex justify-end space-x-3">
          <button
            type="button"
            class="cancel-button bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"
            (click)="closeEditObjectivesModal()">
            Cancelar
          </button>
          <button
            type="submit"
            class="save-button bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"
            [disabled]="editObjectivesForm.invalid">
            Guardar cambios
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal Editar Perfil -->
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" *ngIf="isEditingProfile">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">Editar Información Personal</h3>
      <form (ngSubmit)="saveProfileChanges()" #editProfileForm="ngForm">
        <div class="form-group mb-4">
          <label for="nombre" class="block text-gray-700 dark:text-gray-300 mb-2">Nombre:</label>
          <input
            type="text"
            id="nombre"
            name="nombre"
            [(ngModel)]="editedUserData.nombre"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
        </div>
        <div class="form-group mb-4">
          <label for="email" class="block text-gray-700 dark:text-gray-300 mb-2">Email:</label>
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="editedUserData.email"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
        </div>
        <div class="form-group mb-4">
          <label for="sexo" class="block text-gray-700 dark:text-gray-300 mb-2">Sexo:</label>
          <select
            id="sexo"
            name="sexo"
            [(ngModel)]="editedUserData.sexo"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
            required>
            <option value="hombre">Hombre</option>
            <option value="mujer">Mujer</option>
            <option value="otro">Otro</option>
          </select>
        </div>
        <div class="form-group mb-4">
          <label for="edad" class="block text-gray-700 dark:text-gray-300 mb-2">Edad:</label>
          <input
            type="number"
            id="edad"
            name="edad"
            [(ngModel)]="editedUserData.edad"
            min="10"
            max="100"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
        </div>
        <div class="form-group mb-4">
          <label for="altura" class="block text-gray-700 dark:text-gray-300 mb-2">Altura (cm):</label>
          <input
            type="number"
            id="altura"
            name="altura"
            [(ngModel)]="editedUserData.altura"
            min="100"
            max="250"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
        </div>
        <div class="form-group mb-6">
          <label for="peso" class="block text-gray-700 dark:text-gray-300 mb-2">Peso (kg):</label>
          <input
            type="number"
            id="peso"
            name="peso"
            [(ngModel)]="editedUserData.peso"
            min="30"
            max="300"
            class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
        </div>
        <div class="modal-buttons flex justify-end space-x-3">
          <button
            type="button"
            class="cancel-button bg-gray-300 hover:bg-gray-400 dark:bg-gray-600 dark:hover:bg-gray-700 text-gray-800 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"
            (click)="closeEditProfileModal()">
            Cancelar
          </button>
          <button
            type="submit"
            class="save-button bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"
            [disabled]="editProfileForm.invalid">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
